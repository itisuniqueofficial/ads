window.onload=function(){fetch('/video-ads.xml').then(response=>response.text()).then(data=>{const parser=new DOMParser();const xmlDoc=parser.parseFromString(data,"text/xml");loadAdFromXML(xmlDoc)}).catch(error=>{console.error('Error loading XML:',error);const popup=document.getElementById('popupAd');popup.querySelector('.ad-text').textContent="Oops! Ad failed to load.";popup.querySelector('.ad-button').textContent="Try Again Later";popup.classList.add('active')})};

function loadAdFromXML(xmlDoc){const popup=document.getElementById('popupAd');const adText=popup.querySelector('.ad-text');const adVideo=popup.querySelector('.ad-video');const adSource=adVideo.querySelector('source');const adButton=popup.querySelector('.ad-button');const ads=xmlDoc.getElementsByTagName('ad');const randomAdIndex=Math.floor(Math.random()*ads.length);const ad=ads[randomAdIndex];const url=ad.getElementsByTagName('url')[0].textContent;const video=ad.getElementsByTagName('video')[0].textContent;const width=ad.getElementsByTagName('width')[0].textContent;const height=ad.getElementsByTagName('height')[0].textContent;const title=ad.getElementsByTagName('title')[0].textContent;const buttonText=ad.getElementsByTagName('button')[0].textContent;adText.textContent=title;adSource.src=video;adVideo.setAttribute('width',width);adVideo.setAttribute('height',height);adButton.textContent=buttonText;adVideo.load();adVideo.play().catch(e=>{console.log('Auto-play with sound was prevented:',e);adVideo.controls=true});adButton.onclick=function(){this.classList.add('loading');this.disabled=true;adVideo.pause();setTimeout(()=>{window.location.href=url},1000)};setTimeout(()=>{popup.classList.add('active')},1000)}

function closePopup(){const popup=document.getElementById('popupAd');const adVideo=popup.querySelector('.ad-video');adVideo.pause();popup.style.animation='fadeScale 0.3s ease-out reverse';setTimeout(()=>{popup.classList.remove('active');popup.style.animation='';document.querySelector('body').focus()},300)}